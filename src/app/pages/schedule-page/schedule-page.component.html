<nav class="header">
    <h1 class="page-title">Horaire des passages</h1>
    <hr class="delimitation">
</nav>

<div class="schedule-container">
    <div class="schedule-element">
        <h3 class="column-title route">&nbsp;</h3>
        <h3 class="column-title schedule-time">Planifiés</h3>
        <h3 class="column-title prediction-time">Temps réel</h3>
        <h3 class="column-title service-state">État du service</h3>
    </div>

    <div class="schedule-container-content">
        <div *ngFor="let time of times" class="schedule-element">
            <p class="route route-icon">
                <span>{{ time.routeId }}</span>
            </p>

            <p class="schedule-time">
                {{ this.formatTimeToWait(time.stMinutesAhead, time.stSecondsAhead) }}
            </p>

            <p class="prediction-time">
                <br *ngIf="!time.rtMinutesAhead || !time.rtSecondsAhead">
                <span *ngIf="time.rtMinutesAhead && time.rtSecondsAhead">
                    {{ this.formatTimeToWait(time.rtMinutesAhead, time.rtSecondsAhead) }}
                </span>
            </p>

            <p class="service-state">
                <br *ngIf="getTripArrivalState(time) === 4">
                <span *ngIf="time.rtMinutesAhead && time.rtSecondsAhead">
                    <span *ngIf="getTripArrivalState(time) === 0">
                        En avance de {{ this.formatTimeDifference(time) }}
                    </span>
                    <span *ngIf="getTripArrivalState(time) === 1">
                        À l'heure
                    </span>
                    <span *ngIf="getTripArrivalState(time) === 2">
                        En retard de {{ this.formatTimeDifference(time) }}
                    </span>
                </span>
            </p>
        </div>
    </div>
</div>

<app-map [agencyId]="agencyId ? agencyId : ''" [routeId]="routeId ? routeId : ''"></app-map>
