<app-toolbar
    (agencyListClick)="this.selectAgencyList($event)"
    (routeListClick)="this.routeListSelected = $event"
    (stopListClick)="this.stopListSelected = $event"
    (vehicleListClick)="this.vehicleListSelected = $event">
</app-toolbar>

<div class="list-container">
    <app-vehicle-info
        *ngIf="this.vehicleSelected"
        [vehicle]="this.vehicleSelected"
        [agencyId]="this.vehicleSelectedAgencyId">
    </app-vehicle-info>

    <app-agency-list
        *ngIf="this.agencyListSelected && !this.vehicleSelected"
        [selections]="this.agencyIdsSelected"
        [selectAll]="this.selectAllAgenciesOption"
        (addAgencyIds)="this.addAgencyIds($event)"
        (removeAgencyIds)="this.removeAgencyIds($event)">
    </app-agency-list>

    <app-route-list
        *ngIf="this.routeListSelected && !this.vehicleSelected"
        [agencyIds]="this.agencyIdsSelected"
        [selections]="this.routeIdsSelected"
        (addRouteId)="this.addRouteId($event)"
        (removeRouteId)="this.removeRouteId($event)">
    </app-route-list>

    <app-stop-list
        *ngIf="this.stopListSelected && !this.vehicleSelected">
    </app-stop-list>
</div>

<div
    class="option-container"
    *ngIf="this.agencyListSelected || this.routeListSelected">
    <button
        *ngIf="this.agencyListSelected && !this.vehicleSelected"
        [ngClass]="this.selectAllAgenciesOption ? 'selected' : ''"
        (click)="this.changeSelectAllAgencies()">
        <svg class="option-icon">
            <use xlink:href='./assets/icons/select-all.svg#select-all' href="./assets/icons/select-all.svg#select-all"></use>
        </svg>
        <span
            class="option-name"
            *ngIf="!this.selectAllAgenciesOption">
            Tout sélectionner
        </span>
    </button>
    <button
        *ngIf="this.agencyIdsSelected.length && !this.vehicleSelected"
        [ngClass]="this.mergeAgenciesOption ? 'selected' : ''"
        (click)="this.changeMergeAgencies()">
        <svg class="option-icon">
            <use xlink:href='./assets/icons/merge-all.svg#merge-all' href="./assets/icons/merge-all.svg#merge-all"></use>
        </svg>
        <span 
            class="option-name"
            *ngIf="!this.mergeAgenciesOption">
            Fusionner les repères
        </span>
    </button>
    <button
        *ngIf="this.agencyIdsSelected.length && !this.vehicleSelected"
        [ngClass]="this.oldVehiclesOption ? 'selected' : ''"
        (click)="this.changeOldVehiclesOption()">
        <svg class="option-icon">
            <use xlink:href='./assets/icons/clock.svg#clock' href="./assets/icons/clock.svg#clock"></use>
        </svg>
        <span 
            class="option-name"
            *ngIf="!this.oldVehiclesOption">
            Afficher les véhicules inactifs
        </span>
    </button>
</div>

<app-map 
    [agencies]="this.agencyIdsSelected"
    [mergeAgencies]="this.mergeAgenciesOption"
    [showOldVehicles]="this.oldVehiclesOption"
    (newVehicleSelected)="this.addVehicleSlected($event)"
    (newVehicleSelectedAgencyId)="this.addVehicleSlectedAgencyId($event)">
</app-map>
