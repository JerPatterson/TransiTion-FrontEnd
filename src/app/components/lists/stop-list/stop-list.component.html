<div class="stop-list">
    <div *ngIf="!this.agencyIdsToShow.size">
        <svg class="information-icon">
            <use
                xlink:href='./assets/icons/information.svg#information'
                href="./assets/icons/information.svg#information">
            </use>
        </svg>
        <span class="information-text">Il faut d'abord s√©lectionner une agence...</span>
    </div>

    <div
        class="agency-stop-list"
        *ngFor="let stops of this.stops">
        <div *ngIf="this.agencyIdsToShow.has(stops.agency.agency_id)">
            <div
                class="agency-element"
                (click)="this.onAgencyClick(stops.agency.agency_id)">
                <h3 class="agency-name">
                    {{ stops.agency.agency_name }}
                </h3>
                <svg 
                    class="list-icon"
                    *ngIf="!this.agencyIdsSelected.has(stops.agency.agency_id)">
                    <use 
                        xlink:href='./assets/icons/show.svg#show'
                        href="./assets/icons/show.svg#show">
                    </use>
                </svg>
                <svg
                    class="list-icon"
                    *ngIf="this.agencyIdsSelected.has(stops.agency.agency_id)">
                    <use
                        xlink:href='./assets/icons/hide.svg#hide'
                        href="./assets/icons/hide.svg#hide">
                    </use>
                </svg>
            </div>
            <hr>
            <div *ngIf="this.agencyIdsSelected.has(stops.agency.agency_id)">
                <cdk-virtual-scroll-viewport class="stop-viewport" [itemSize]="100">
                    <app-stop 
                        class="stop-element"
                        *cdkVirtualFor="let stop of stops.stops; trackBy: this.trackByStop"
                        [stop]="stop"
                        [selected]="this.stopIdSelected === (stops.agency.agency_id + '/' + stop.stop_id)"
                        (click)="this.onStopClick(stops.agency.agency_id, stop.stop_id)">
                    </app-stop>
                </cdk-virtual-scroll-viewport>
            </div>
        </div>
    </div>
</div>
